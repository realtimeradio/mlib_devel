name: cfa_digitizer
manufacturer: Xilinx
fpga: xc7k70tfbg484-2
#fpga: xc7k410tffg676-2
backend_target: vivado
invert_sfp_disable: True
sources: []
constraints: []
provides:
  - sfp0
  - sfp1
  - white_rabbit
  - sys_clk
  - sys_clk90
  - sys_clk180
  - sys_clk270
pins:
  sys_clk_p:
    loc: G11
    iostd: LVDS_25
  sys_clk_n:
    loc: G10
    iostd: LVDS_25

  miso:
    loc: C22
    iostd: LVCMOS33
  mosi:
    loc: D22
    iostd: LVCMOS33
  sclk:
    loc: D21
    iostd: LVCMOS33
  cs_n:
    loc: D20
    iostd: LVCMOS33

  gpio:
    iostd: LVCMOS33
    loc:
      - Y18
      - Y19
      - W17
      - Y17
      - AB15
      - AB16
      - AA14
      - AA15
      # DIP switches 0..3. No external pull. Closed = GND
      - W16
      - U16
      - V17
      - T16

  # Check direction (used for uBlaze)
  usb_tx:
    iostd: LVCMOS33
    loc: H22
  usb_rx:
    iostd: LVCMOS33
    loc: J22

  led:
    iostd: LVCMOS33
    loc:
      - Y16
      - Y14
      - W14
      - V14

  # 10G (156.25 refclk)
  eth_clk_p:
    loc:
      - F6
  eth_clk_n:
    loc: 
      - F5
  mgt_tx_p:
    loc: [D2, A4]
  mgt_tx_n:
    loc: [D1, A3]
  mgt_rx_p:
    loc: [E4, B6]
  mgt_rx_n:
    loc: [E3, B5]

  # 1G / WR
  wr_20m_vcxo:
    loc: V19
    iostd: LVCMOS33
  wr_125m_gtrefclk_p:
    loc: D6
  wr_125m_gtrefclk_n:
    loc: D5
  wr_sfp_tx_p:
    loc: A4
  wr_sfp_tx_n:
    loc: A3
  wr_sfp_rx_p:
    loc: B6
  wr_sfp_rx_n:
    loc: B5

  wr_sfp_mod_def1: #AKA SCL
    loc: B15
    iostd: LVCMOS33
  wr_sfp_mod_def2: #AKA SDA
    loc: C14
    iostd: LVCMOS33
  wr_sfp_tx_fault:
    loc: B21
    iostd: LVCMOS33
  wr_sfp_los:
    loc: B16
    iostd: LVCMOS33

  # TODO: check direction
  wr_uart_rx:
    loc: H22
    iostd: LVCMOS33
  wr_uart_tx:
    loc: J22
    iostd: LVCMOS33

  wr_spi_cs_n:
    loc: AB21
    iostd: LVCMOS33
  wr_spi_miso: # flash chip IO1 / schematic SPI_DO
    loc: AB22
    iostd: LVCMOS33
  wr_spi_mosi: # flash chip IO0 / schematic SPI_DI
    loc: AA19
    iostd: LVCMOS33
  wr_spi_sclk:
    loc: AA20
    iostd: LVCMOS33

  wr_dac_25m_sclk:
    loc: W15
    iostd: LVCMOS33
  wr_dac_25m_mosi:
    loc: U15
    iostd: LVCMOS33
  wr_dac_25m_cs_n:
    loc: V15
    iostd: LVCMOS33

  wr_dac_20m_sclk:
    loc: W22
    iostd: LVCMOS33
  wr_dac_20m_mosi:
    loc: Y22
    iostd: LVCMOS33
  wr_dac_20m_cs_n:
    loc: V22
    iostd: LVCMOS33

  wr_onewire:
    loc: T18
    iostd: LVCMOS33
  
  sfp_disable:
    iostd: LVCMOS33
    loc: [A21, B20] #10G, 1G

  sfp_sda:
    iostd: LVCMOS33
    loc: [A20, C14] #10G, 1G

  sfp_scl:
    iostd: LVCMOS33
    loc: [C19, B15] #10G, 1G

  # 2x MAC eeprom. Addresses 0x50, 0x51
  mac_sda:
    iostd: LVCMOS33
    loc: N17

  mac_scl:
    iostd: LVCMOS33
    loc: P16


  adc_csn:
    iostd: LVCMOS18
    loc:
      - AF3
      - AF10
      - V14
  adc_rst_n:
    iostd: LVCMOS18
    loc:
      - AE5
      - AF13
      - V19
  adc_pd:
    iostd: LVCMOS18
    loc:
      - AE3
      - AE8
      - W15
  adc_sdata:
    iostd: LVCMOS18
    loc:
      - AF2
      - AF9
      - W14
  adc_sclk:
    iostd: LVCMOS33
    loc:
      - M17
      - L18
      - K16
  adc_lclkp:
    iostd: LVDS
    loc:
      - AA3
  adc_lclkn:
    iostd: LVDS
    loc:
      - AA2
  # ADC data pins, named as per schematic.
  # Even pins are _p, odd are _n.
  adc0_out:
    iostd: LVDS
    loc:
      - V2
      - V1
      - U2
      - U1
      - W6
      - W5
      - U7
      - V6
      - V3
      - W3
      - Y3
      - Y2
      - AD6
      - AD5
      - AD4
      - AD3
  adc1_out:
    iostd: LVDS
    loc:
      - V8
      - V7
      - W10
      - W9
      - Y8
      - Y7
      - Y11
      - Y10
      - AB12
      - AC12
      - AA13
      - AA12
      - AA8
      - AA7
      - AC8
      - AD8
  adc2_out:
    iostd: LVDS
    loc:
      - AF14
      - AF15
      - AD15
      - AE15
      - AE18
      - AF18
      - AF19
      - AF20
      - AA14
      - AA15
      - AC14
      - AD14
      - AB19
      - AB20
      - AA19
      - AA20
  clk_sel_a:
    iostd: LVCMOS33
    loc:
      - A18
  clk_sel_b:
    iostd: LVCMOS33
    loc:
      - A19
  lmx2581_clk:
    iostd: LVCMOS33
    loc: H16
  lmx2581_data:
    iostd: LVCMOS33
    loc: J15
  lmx2581_muxout:
    iostd: LVCMOS33
    loc: J19
  lmx2581_le:
    iostd: LVCMOS33
    loc: J16
  lmx2581_ce:
    iostd: LVCMOS33
    loc: G15
  lmx2581_be:
    iostd: LVCMOS33
    loc: F15
  xadc_p:
    loc: N12
  xadc_n:
    loc: P11
  spi_flash_data:
    iostd: LVCMOS25
    loc:
      - B24
      - A25
      - B22
      - A22
  #spi_flash_clk:
  #  iostd: LVCMOS25
  #  loc: 
  spi_flash_csn:
    iostd: LVCMOS25
    loc: C23
      


